<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Sistema de Finanzas Personales</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>Sistema de Finanzas Personales</h1>
        </header>
        <main class="main-content">
            <nav class="sidebar">
                <a href="#dashboard" data-section="dashboard">Dashboard</a>
                <a href="#transacciones" data-section="transacciones">Transacciones</a>
                <a href="#categorias" data-section="categorias">Categorías</a>
                <a href="#presupuestos" data-section="presupuestos">Presupuestos</a>
            </nav>

            <div class="content-area">
                <section id="dashboard" class="section active">
                    <h2 id="dashboard-title" tabindex="-1">Dashboard Financiero</h2>

                    <div class="dashboard-controls">
                        <select id="dashboard-filtro-mes">
                            <option value="2024-01">Enero 2024</option>
                            <option value="2024-02">Febrero 2024</option>
                            <option value="2024-03">Marzo 2024</option>
                        </select>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card" data-id="summary-income">
                            <h3>Ingresos</h3>
                            <p id="dashboard-ingresos" class="positive">$0.00</p>
                        </div>
                        <div class="card" data-id="summary-expense">
                            <h3>Gastos</h3>
                            <p id="dashboard-gastos" class="negative">$0.00</p>
                        </div>
                        <div class="card" data-id="summary-balance">
                            <h3>Balance</h3>
                            <p id="dashboard-balance">$0.00</p>
                        </div>
                        <div class="card" data-id="summary-budget">
                            <h3>Presupuesto</h3>
                            <p id="dashboard-presupuesto">$0.00</p>
                        </div>
                    </div>

                    <div class="charts-container">
                        <div class="chart-card">
                            <canvas id="expensesByCategoryChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <canvas id="balanceVsEstimatedChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <canvas id="expensesVsEstimatedChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <canvas id="annualBalanceChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-budget-status">
                        <h3>Estado del Presupuesto Actual</h3>
                        <div id="dashboard-presupuesto-detalle">
                        </div>
                    </div>

                    <div class="recent-transactions">
                        <h3>Transacciones Recientes</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Descripción</th>
                                    <th>Categoría</th>
                                    <th>Tipo</th>
                                    <th>Monto</th>
                                </tr>
                            </thead>
                            <tbody id="dashboard-transacciones-recientes">
                            </tbody>
                        </table>
                    </div>
                </section>
                <section id="transacciones" class="section">
                    <h2 id="form-transaccion-titulo" tabindex="-1">Gestión de Transacciones</h2>

                    <div class="filtros-container">
                        <select id="filtro-tipo">
                            <option value="">Todos los tipos</option>
                            <option value="ingreso">Ingresos</option>
                            <option value="egreso">Egresos</option>
                        </select>

                        <select id="filtro-categoria">
                            <option value="">Todas las categorías</option>
                        </select>

                        <input type="text" id="busqueda" placeholder="Buscar por descripción o categoría...">

                        <input type="month" id="filtro-mes">

                        <button id="btn-limpiar-filtros" type="button">Limpiar Filtros</button>
                    </div>
                    <form id="form-transaccion">
                        <input type="hidden" id="transaction-id" data-id="">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tipo:</label>
                                <label><input type="radio" name="tipo-transaccion" value="ingreso" required>Ingreso</label>
                                <label><input type="radio" name="tipo-transaccion" value="egreso">Egreso</label>
                            </div>
                            <div class="form-group">
                                <label for="monto">Monto:</label>
                                <input type="number" id="monto" step="0.01" min="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="fecha">Fecha:</label>
                                <input type="date" id="fecha" required>
                            </div>
                            <div class="form-group">
                                <label for="categoria-transaccion">Categoría:</label>
                                <select id="categoria-transaccion" required></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="descripcion">Descripción:</label>
                            <textarea id="descripcion" rows="2"></textarea>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" id="btn-guardar-transaccion">Guardar</button>
                            <button type="button" id="btn-cancelar-transaccion">Cancelar</button>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table id="tabla-transacciones">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Descripción</th>
                                    <th>Categoría</th>
                                    <th>Tipo</th>
                                    <th>Monto</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpo-tabla-transacciones">
                            </tbody>
                        </table>
                    </div>
                    <div class="resumen-transacciones">
                        <p><strong>Total ingresos:</strong> <span id="total-ingresos">$0.00</span></p>
                        <p><strong>Total egresos:</strong> <span id="total-egresos">$0.00</span></p>
                        <p><strong>Balance:</strong> <span id="balance-transacciones">$0.00</span></p>
                    </div>
                </section>
                <section id="categorias" class="section">
                    <h2 id="form-categoria-titulo" tabindex="-1">Gestión de Categorías</h2>
                    <form id="form-categoria">
                        <input type="hidden" id="category-id" data-id="">

                        <div class="form-group">
                            <label for="nombre-categoria">Nombre:</label>
                            <input type="text" id="nombre-categoria" required>
                        </div>
                        <div class="form-group">
                            <label for="tipo-categoria">Tipo:</label>
                            <select id="tipo-categoria">
                                <option value="egreso">Egreso</option>
                                <option value="ingreso">Ingreso</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="color-categoria">Color:</label>
                            <input type="color" id="color-categoria" value="#3498db">
                        </div>
                        <div class="form-buttons">
                            <button type="submit" id="btn-agregar-categoria">Agregar</button>
                            <button type="button" id="btn-cancelar-categoria">Cancelar</button>
                        </div>
                    </form>
                    <div class="lista-categorias">
                        <h3>Categorías Disponibles</h3>
                        <div class="categorias-grid" id="lista-categorias">
                        </div>
                    </div>
                </section>
                <section id="presupuestos" class="section">
                    <h2>Gestión de Presupuestos</h2>
                    <form id="form-presupuesto">
                        <input type="hidden" id="budget-id" data-id="">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="presupuesto-mes">Mes/Año:</label>
                                <input type="month" id="presupuesto-mes" required>
                            </div>
                            <div class="form-group">
                                <label for="presupuesto-categoria">Categoría:</label>
                                <select id="presupuesto-categoria" required></select>
                            </div>
                            <div class="form-group">
                                <label for="presupuesto-monto">Monto Estimado:</label>
                                <input type="number" id="presupuesto-monto" step="0.01" min="0.01" required>
                            </div>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" id="btn-guardar-presupuesto">Guardar</button>
                            <button type="button" id="btn-cancelar-presupuesto">Cancelar</button>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table id="tabla-presupuestos">
                            <thead>
                                <tr>
                                    <th>Categoría</th>
                                    <th>Presupuesto Estimado</th>
                                    <th>Gasto Real</th>
                                    <th>Desviación</th>
                                    <th>% Utilizado</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpo-tabla-presupuestos">
                            </tbody>
                        </table>
                    </div>
                    <div class="presupuesto-proyeccion">
                        <h3>Proyección Mensual de Egresos</h3>
                        <div id="proyeccion-egresos">
                        </div>
                    </div>
                </section>
            </div>
        </main>
        <div id="modal-formulario" class="modal" style="display:none;">
            <div class="modal-content">
                <h3 id="modal-form-titulo"></h3>
                <div id="modal-form-body"></div>
                <div class="modal-buttons">
                    <button id="btn-modal-form-confirmar">Confirmar</button>
                    <button id="btn-modal-form-cancelar">Cancelar</button>
                </div>
            </div>
        </div>
        <div id="modal-confirmacion" class="modal" style="display:none;">
            <div class="modal-content">
                <h3 id="modal-titulo">Confirmación</h3>
                <p id="modal-mensaje">¿Está seguro de que desea realizar esta acción?</p>
                <div class="modal-buttons">
                    <button id="btn-modal-confirmar" data-action="confirm">Confirmar</button>
                    <button id="btn-modal-cancelar" data-action="cancel">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>